<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="../../bower_components/polymer/lib/elements/dom-repeat.html">



<link rel="import" href="shared-styles.html">

<dom-module id="my-view3">
    <template>
        <style include="shared-styles">
            :host {
                display: block;
                padding: 10px;
            }
        </style>
        <div class="card">
            <div class="circle">3</div>
            <h1>View Three</h1>
            <p>Modus commodo minimum eum te, vero utinam assueverit per eu.</p>
            <p>Ea duis bonorum nec, falli paulo aliquid ei eum.Has at minim mucius aliquam, est id tempor laoreet.Pro saepe pertinax ei, ad pri animal labores suscipiantur.</p>

            <button on-click="toggle">toggle collapse</button>
            <iron-collapse id="collapse">
                <div>Content goes here...</div>
            </iron-collapse>
            <br/>
            <br />

            <template is="dom-repeat" items="[[employees]]">
                <button on-click="toggleA" data-idx$="[[item.id]]">toggle collapse</button>
                <iron-collapse id="collapse-[[item.id]]">
                    <div>Content goes here...[[item.first]] - [[item.last]]</div>
                </iron-collapse>
            </template>


        </div>
    </template>
    <script>
        class MyView3 extends Polymer.Element {
            static get is() { return 'my-view3'; }
            static get properties() {
                return {
                    employees: {
                        type: Array, value: [
                            { id: 1, first: 'Bob', last: 'Smith' },
                            { id: 2, first: 'Sally', last: 'Johnson' }
                        ]
                    }
                };
            }
            toggleA(e) {
                console.log(e);
                var idx = e.path[0].dataset.idx;
                var elm = document.getElementById('#collapse-' + idx);
                if (elm === null) {
                    console.warn('can\'t find element via document.getElementById');
                    elm = Polymer.dom(this.root).querySelector('#collapse-' + idx);
                }         
                elm.toggle();

            }
            toggle() {
                this.$.collapse.toggle();
            }
        }

        window.customElements.define(MyView3.is, MyView3);
    </script>
</dom-module>
